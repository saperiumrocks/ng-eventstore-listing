{
  "version": 3,
  "file": "ng-eventstore-listing.umd.min.js",
  "sources": [
    "ng://ng-eventstore-listing/node_modules/tslib/tslib.es6.js",
    "ng://ng-eventstore-listing/out/utils/helpers.ts",
    "ng://ng-eventstore-listing/out/services/jquery.service.ts",
    "ng://ng-eventstore-listing/out/services/script.service.ts",
    "ng://ng-eventstore-listing/out/services/push.service.ts",
    "ng://ng-eventstore-listing/out/services/playback.service.ts",
    "ng://ng-eventstore-listing/out/services/playback-list.service.ts",
    "ng://ng-eventstore-listing/out/ng-eventstore-listing.component.ts",
    "ng://ng-eventstore-listing/out/directives/template.directive.ts",
    "ng://ng-eventstore-listing/out/components/item-template-holder/item-template-holder.component.ts",
    "ng://ng-eventstore-listing/out/services/socket.io.service.ts",
    "ng://ng-eventstore-listing/out/ng-eventstore-listing.module.ts",
    "ng://ng-eventstore-listing/out/components/template-components/item-template/item-template.component.ts",
    "ng://ng-eventstore-listing/out/enums/filter-operator.ts",
    "ng://ng-eventstore-listing/out/enums/sort-direction.ts",
    "ng://ng-eventstore-listing/out/enums/group-boolean-operator.ts"
  ],
  "sourcesContent": [
    "/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n",
    "export const Helpers = {\r\n  generateToken: () => {\r\n    return Math.random().toString(36).substr(2, 9) + '-' + Date.now().toString();\r\n  }\r\n};\r\n",
    "import { InjectionToken } from '@angular/core';\r\n\r\nexport let JQ_TOKEN = new InjectionToken('jQuery');\r\n\r\ndeclare let jQuery: Object;\r\nexport function jQueryFactory() {\r\n  return jQuery;\r\n}\r\n\r\n",
    "import { Injectable } from '@angular/core';\r\nimport { Script } from '../models';\r\n\r\ndeclare var document: any;\r\n\r\n@Injectable()\r\nexport class ScriptService {\r\n  private scripts: any = {};\r\n\r\n  constructor() {}\r\n\r\n  async init(scriptStore: Script[]) {\r\n    const promises = [];\r\n    scriptStore.forEach((script: Script) => {\r\n      // console.log('SCRIPT STORE LOGGING');\r\n      this.scripts[script.name] = {\r\n        loaded: false,\r\n        src: script.src,\r\n        meta: script.meta,\r\n      };\r\n      promises.push(this.load(script.name));\r\n    });\r\n\r\n    return await Promise.all(promises);\r\n  }\r\n\r\n  async load(...scripts: string[]): Promise<any> {\r\n    const promises: any[] = [];\r\n    scripts.forEach((script) => promises.push(this.loadScript(script)));\r\n    return await Promise.all(promises);\r\n  }\r\n\r\n  loadScript(name: string): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      // resolve if already loaded\r\n      if (this.scripts[name].loaded) {\r\n        // console.log('LOADED');\r\n        resolve({\r\n          script: name,\r\n          loaded: true,\r\n          status: 'Already Loaded',\r\n          meta: this.scripts[name].meta,\r\n        });\r\n      } else {\r\n        const existingScript = document.querySelectorAll(`head script[src=\"${this.scripts[name].src}\"]`);\r\n        if (existingScript.length === 0) {\r\n          // load script\r\n          const script = document.createElement('script');\r\n          script.type = 'text/javascript';\r\n          script.src = this.scripts[name].src;\r\n          if (script.readyState) {\r\n            // IE\r\n            script.onreadystatechange = () => {\r\n              // console.log('ON READYSTATECHANGE');\r\n              if (\r\n                script.readyState === 'loaded' ||\r\n                script.readyState === 'complete'\r\n              ) {\r\n                script.onreadystatechange = null;\r\n                this.scripts[name].loaded = true;\r\n                resolve({\r\n                  script: name,\r\n                  loaded: true,\r\n                  status: 'Loaded',\r\n                  meta: this.scripts[name].meta,\r\n                });\r\n              }\r\n            };\r\n          } else {\r\n            // Others\r\n            // console.log('ONLOAD');\r\n            script.onload = () => {\r\n              this.scripts[name].loaded = true;\r\n              resolve({\r\n                script: name,\r\n                loaded: true,\r\n                status: 'Loaded',\r\n                meta: this.scripts[name].meta,\r\n              });\r\n            };\r\n          }\r\n          script.onerror = (error: any) =>\r\n          console.log('ON ERROR', error);\r\n            resolve({\r\n              script: name,\r\n              loaded: false,\r\n              status: 'Loaded',\r\n              meta: this.scripts[name].meta,\r\n            });\r\n          document.getElementsByTagName('head')[0].appendChild(script);\r\n        } else {\r\n          // console.log('Script already exists');\r\n          resolve();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  getScript(scriptName: string) {\r\n    return this.scripts[scriptName];\r\n  }\r\n}\r\n",
    "import { Injectable } from '@angular/core';\r\nimport { Helpers } from '../utils/helpers.js';\r\nimport _forOwn from 'lodash-es/forOwn';\r\nimport _clone from 'lodash-es/clone';\r\nimport * as io from 'socket.io-client';\r\n\r\n@Injectable()\r\nexport class PushService {\r\n  private ioPush: any;\r\n  private subscriptions: any = {};\r\n  constructor() { }\r\n\r\n  init(socketUrl: string) {\r\n    if (!this.ioPush) {\r\n      this.ioPush = io.connect(`${socketUrl}/events`);\r\n\r\n      this.ioPush.on('message', (eventObj) => {\r\n        this._processEvent(eventObj);\r\n      });\r\n\r\n      this.ioPush.on('reconnect', () => {\r\n        // console.log('TEST RECONNECTION');\r\n        // this.ioPush.emit('resubscribe', () => {\r\n          // console.log(this.subscriptions);\r\n          _forOwn(this.subscriptions, (sub) => {\r\n            const subscriptionQuery = Object.assign(sub.query, {\r\n              offset: sub.offset,\r\n            });\r\n\r\n            this.ioPush.emit('subscribe', subscriptionQuery, (token: string) => {\r\n              if (token) {\r\n                // console.log('Reconnected:', token, subscriptionQuery);\r\n                sub.token = token;\r\n              } else {\r\n                console.error('Reconnect error for query', subscriptionQuery);\r\n              }\r\n            });\r\n          });\r\n        // });\r\n      });\r\n    }\r\n  }\r\n\r\n  _processEvent(eventObj: any) {\r\n    const self = this;\r\n    // console.log('got message from push server: ', eventObj);\r\n    const queryKey = `${eventObj.context}.${eventObj.aggregate}.${eventObj.aggregateId}`;\r\n    const clientTokens = Object.keys(self.subscriptions);\r\n    // redirect to mapped subscription/token callback\r\n    clientTokens.forEach((clientToken) => {\r\n      const sub = self.subscriptions[clientToken];\r\n      if (sub) {\r\n        const subQueryKey = `${sub.query.context}.${sub.query.aggregate}.${sub.query.aggregateId}`;\r\n        if (subQueryKey === queryKey) {\r\n          // update next offset (from stream revision) for this subscription, so for reconnecting\r\n          if (!isNaN(eventObj.streamRevision)) {\r\n            sub.offset = eventObj.streamRevision + 1;\r\n          }\r\n          if (typeof sub.cb === 'function') {\r\n            sub.cb(undefined, eventObj, sub.owner, clientToken);\r\n          }\r\n\r\n          // iterate on monitors meta tags\r\n          const tags = Object.keys(sub.monitorTags);\r\n          tags.forEach((tag) => {\r\n            // check for state/eventSource._meta or event._meta\r\n            if (eventObj._meta && eventObj._meta.tag === tag) {\r\n              let reason = 'N/A';\r\n              if (typeof eventObj.eventType === 'string') {\r\n                reason = eventObj.eventType;\r\n              } else if (typeof eventObj.stateType === 'string') {\r\n                reason = eventObj.stateType;\r\n                if (\r\n                  eventObj.eventSource &&\r\n                  typeof eventObj.eventSource.eventType === 'string'\r\n                ) {\r\n                  reason += ` <- ${eventObj.eventSource.eventType}`;\r\n                }\r\n              }\r\n              // iterate on the monitors\r\n              const monitors = sub.monitorTags[tag];\r\n              monitors.forEach((monitor) => {\r\n                monitor.callback(reason, eventObj._meta);\r\n              });\r\n            }\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  subscribe(query, offset, owner, cb) {\r\n    // await this.waitForSocketConnection();\r\n    const pushToken = Helpers.generateToken();\r\n    // map new subscription, then try to subscribe to server asap\r\n    this.subscriptions[pushToken] = {\r\n      query: query,\r\n      offset: offset,\r\n      owner: owner,\r\n      cb: cb,\r\n      monitorTags: {},\r\n    };\r\n\r\n    const sub = this.subscriptions[pushToken];\r\n    if (sub && !sub.token) {\r\n      // build up proper subscribe request query\r\n      const subscriptionQuery = Object.assign(sub.query, {\r\n        offset: sub.offset,\r\n      });\r\n\r\n      this.ioPush.emit('subscribe', subscriptionQuery, ({ subscriptionToken, catchUpEvents }) => {\r\n        if (subscriptionToken) {\r\n          // console.log('Server Subscribed:', token, subscriptionQuery);\r\n          sub.token = subscriptionToken;\r\n        } else {\r\n          console.error('Subscribe error for query', subscriptionQuery);\r\n        }\r\n\r\n        if (catchUpEvents && catchUpEvents.length > 0) {\r\n          catchUpEvents.forEach((event) => {\r\n            cb(undefined, event, owner, pushToken);\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    return pushToken;\r\n  }\r\n\r\n  unsubscribe(pushTokens: string[]): Promise<void> {\r\n    const socketTokens = [];\r\n\r\n    pushTokens.forEach((pushToken) => {\r\n      if (this.subscriptions[pushToken]) {\r\n        const clientSubscription = _clone(this.subscriptions[pushToken]);\r\n        delete this.subscriptions[pushToken];\r\n\r\n        const sub = clientSubscription;\r\n        if (sub && sub.token) {\r\n          socketTokens.push(sub.token);\r\n        }\r\n      }\r\n    });\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this.ioPush.emit('unsubscribe', socketTokens, () => {\r\n        resolve();\r\n      });\r\n    });\r\n  }\r\n}\r\n",
    "import _clone from 'lodash-es/clone';\r\nimport { Helpers } from './../utils/helpers';\r\nimport { Injectable } from '@angular/core';\r\nimport { PushService } from './push.service';\r\nimport {\r\n  StateFunctions,\r\n  PlaybackList,\r\n  PlaybackRegistry,\r\n  Query,\r\n  ConditionalSubscriptionRegistry,\r\n  CustomPlaybackConfiguration\r\n} from '../models';\r\nimport { CustomPlaybackRegistry } from '../models/custom-playback-registry';\r\n\r\n@Injectable()\r\nexport class PlaybackService {\r\n  _playbackRegistry: PlaybackRegistry = {};\r\n  _conditionalSubscriptionRegistry: ConditionalSubscriptionRegistry = {};\r\n  _customPlaybackRegistry: CustomPlaybackRegistry = {};\r\n\r\n  constructor(\r\n    private pushService: PushService\r\n  ) {}\r\n\r\n  init(socketUrl: string) {\r\n    this.pushService.init(socketUrl);\r\n  }\r\n\r\n  async unregisterForPlayback(playbackTokens: string[]) {\r\n    // unregister from playback registry\r\n    const pushTokens = playbackTokens.map((playbackToken) => {\r\n      return this._playbackRegistry[playbackToken].pushSubscriptionId;\r\n    });\r\n\r\n    playbackTokens.forEach(async (token) => {\r\n      const rowId = this._playbackRegistry[token].rowId;\r\n\r\n      // console.log('BEFORE');\r\n      // console.log(this._conditionalSubscriptionRegistry);\r\n\r\n      if (rowId) {\r\n        delete this._conditionalSubscriptionRegistry[rowId];\r\n      }\r\n\r\n      // console.log('AFTER');\r\n      // console.log(this._conditionalSubscriptionRegistry);\r\n\r\n      // unsubscribe from push\r\n      delete this._playbackRegistry[token];\r\n    });\r\n\r\n    await this.pushService.unsubscribe(pushTokens);\r\n  }\r\n\r\n  async registerForPlayback(\r\n    owner: object,\r\n    scriptName: string,\r\n    query: Query,\r\n    stateFunctions: StateFunctions,\r\n    playbackList: PlaybackList,\r\n    streamRevisionFunction: (item: any) => number = (item) => 0,\r\n    rowId?: string,\r\n    conditionFunction?: (item: any) => boolean,\r\n    rowIdFunction?: (item: any) => string\r\n  ) {\r\n    const playbackSubscriptionId = Helpers.generateToken();\r\n\r\n    let rowData;\r\n    if (rowId) {\r\n      const aggregateId = rowId ? rowId : query.aggregateId;\r\n      rowData = await new Promise((resolve, reject) => {\r\n        playbackList.get(aggregateId, (error, item) => {\r\n          if (error) {\r\n            reject(error);\r\n          }\r\n          resolve(item);\r\n        });\r\n      });\r\n    }\r\n\r\n    let streamRevision;\r\n    let isConditionTrue;\r\n\r\n    if (rowData) {\r\n      streamRevision = streamRevisionFunction(rowData);\r\n      isConditionTrue = conditionFunction ? (conditionFunction(rowData) ? true : false) : undefined;\r\n    }\r\n\r\n    let pushSubscriptionId;\r\n    if (isConditionTrue === true || conditionFunction === undefined) {\r\n      pushSubscriptionId = await this.pushService.subscribe(\r\n        query,\r\n        streamRevision,\r\n        this,\r\n        async (err, eventObj, owner2) => {\r\n          // owner is playbackservice\r\n          const self = owner2 as PlaybackService;\r\n\r\n          // console.log(self._playbackRegistry);\r\n\r\n          const registration = self._playbackRegistry[playbackSubscriptionId];\r\n\r\n          if (registration) {\r\n            if (eventObj.aggregate === 'states') {\r\n              const thisScriptName = registration.scriptName;\r\n              const fromEvent = eventObj.payload._meta.fromEvent;\r\n              const eventName = fromEvent.payload.name;\r\n              const thisPlaybackScript = window[thisScriptName];\r\n              const playbackFunction = thisPlaybackScript.playbackInterface[eventName];\r\n\r\n              if (playbackFunction) {\r\n                if (registration.rowId) {\r\n                  eventObj.aggregateId = registration.rowId;\r\n                }\r\n                const state = eventObj.payload;\r\n                const funcs = {\r\n                  emit: (targetQuery, payload, done) => {\r\n                    done();\r\n                  },\r\n                  getPlaybackList: (\r\n                    playbackListName: string,\r\n                    callback: (err, playbackList: PlaybackList) => void\r\n                  ) => {\r\n                    if (registration.playbackList) {\r\n                      callback(null, registration.playbackList);\r\n                    } else {\r\n                      callback(\r\n                        new Error(\r\n                          'PlaybackList does not exist in this registration'\r\n                        ),\r\n                        null\r\n                      );\r\n                    }\r\n                  },\r\n                };\r\n\r\n                const doneCallback = () => {\r\n                  registration.playbackList.get(eventObj.aggregateId, (error, item) => {\r\n                    self._updateConditionalSubscriptions(eventObj.aggregateId, item);\r\n                  });\r\n                };\r\n\r\n                playbackFunction(state, fromEvent, funcs, doneCallback);\r\n\r\n                // Run custom playbackEvents if they exist\r\n                if (this._customPlaybackRegistry[eventName]) {\r\n                  this._customPlaybackRegistry[eventName].forEach((customPlaybackConfiguration: CustomPlaybackConfiguration) => {\r\n                    customPlaybackConfiguration.playbackFunction(fromEvent);\r\n                  });\r\n                }\r\n              }\r\n            } else {\r\n              const thisScriptName = registration.scriptName;\r\n              const thisPlaybackScript = window[thisScriptName];\r\n              const playbackFunction = thisPlaybackScript.playbackInterface[eventObj.payload.name];\r\n\r\n              if (playbackFunction) {\r\n                // Override aggregateId to handle other subscriptions\r\n                if (registration.rowId) {\r\n                  eventObj.aggregateId = registration.rowId;\r\n                }\r\n                const row = stateFunctions.getState(eventObj.aggregateId);\r\n                const state = row.data;\r\n                const funcs = {\r\n                  emit: (targetQuery, payload, done) => {\r\n                    done();\r\n                  },\r\n                  getPlaybackList: (\r\n                    playbackListName: string,\r\n                    callback: (err, playbackList: PlaybackList) => void\r\n                  ) => {\r\n                    if (registration.playbackList) {\r\n                      callback(null, registration.playbackList);\r\n                    } else {\r\n                      callback(\r\n                        new Error(\r\n                          'PlaybackList does not exist in this registration'\r\n                        ),\r\n                        null\r\n                      );\r\n                    }\r\n                  },\r\n                };\r\n\r\n                const doneCallback = () => {\r\n                  registration.playbackList.get(eventObj.aggregateId, (error, item) => {\r\n                    self._updateConditionalSubscriptions(eventObj.aggregateId, item);\r\n                  });\r\n                };\r\n\r\n                playbackFunction(state, eventObj, funcs, doneCallback);\r\n                // Run custom playbackEvents if they exist\r\n                if (this._customPlaybackRegistry[eventObj.payload.name]) {\r\n                  this._customPlaybackRegistry[eventObj.payload.name].forEach(\r\n                    (customPlaybackConfiguration: CustomPlaybackConfiguration) => {\r\n                      customPlaybackConfiguration.playbackFunction(eventObj);\r\n                    });\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      );\r\n    }\r\n\r\n    // If condition exists, register in conditional registry\r\n    if (conditionFunction) {\r\n      if (this._conditionalSubscriptionRegistry[rowId] && Array.isArray(this._conditionalSubscriptionRegistry[rowId])) {\r\n        this._conditionalSubscriptionRegistry[rowId].push({\r\n          playbackList: playbackList,\r\n          scriptName: scriptName,\r\n          owner: owner,\r\n          stateFunctions: stateFunctions,\r\n          query: query,\r\n          streamRevisionFunction: streamRevisionFunction,\r\n          conditionFunction: conditionFunction,\r\n          pushSubscriptionId: pushSubscriptionId,\r\n          playbackSubscriptionId: playbackSubscriptionId,\r\n          rowIdFunction: rowIdFunction\r\n        });\r\n      } else {\r\n        this._conditionalSubscriptionRegistry[rowId] = [{\r\n          playbackList: playbackList,\r\n          scriptName: scriptName,\r\n          owner: owner,\r\n          stateFunctions: stateFunctions,\r\n          query: query,\r\n          streamRevisionFunction: streamRevisionFunction,\r\n          conditionFunction: conditionFunction,\r\n          pushSubscriptionId: pushSubscriptionId,\r\n          playbackSubscriptionId: playbackSubscriptionId,\r\n          rowIdFunction: rowIdFunction\r\n        }];\r\n      }\r\n    }\r\n\r\n    this._playbackRegistry[playbackSubscriptionId] = {\r\n      owner: owner,\r\n      pushSubscriptionId: pushSubscriptionId,\r\n      playbackList: playbackList,\r\n      scriptName: scriptName,\r\n      rowId: rowId\r\n    };\r\n\r\n    return playbackSubscriptionId;\r\n  }\r\n\r\n  registerCustomPlaybacks(customPlaybackConfigurations: CustomPlaybackConfiguration[]) {\r\n    customPlaybackConfigurations.forEach((customPlaybackConfiguration: CustomPlaybackConfiguration) => {\r\n      if (!this._customPlaybackRegistry[customPlaybackConfiguration.eventName]) {\r\n        this._customPlaybackRegistry[customPlaybackConfiguration.eventName] = [];\r\n      }\r\n      this._customPlaybackRegistry[customPlaybackConfiguration.eventName].push(customPlaybackConfiguration);\r\n    });\r\n  }\r\n\r\n  resetCustomPlaybacks() {\r\n    this._customPlaybackRegistry = {};\r\n  }\r\n\r\n  _updateConditionalSubscriptions(rowId, rowData) {\r\n    const conditionalSubscriptions = this._conditionalSubscriptionRegistry[rowId] || [];\r\n    conditionalSubscriptions.forEach(async (conditionalSubscription) => {\r\n      if (!conditionalSubscription.pushSubscriptionId && conditionalSubscription.conditionFunction(rowData)) {\r\n        const offset = conditionalSubscription.streamRevisionFunction(rowData);\r\n\r\n        const subQuery = _clone(conditionalSubscription.query);\r\n\r\n        if (conditionalSubscription.rowIdFunction) {\r\n          subQuery.aggregateId = conditionalSubscription.rowIdFunction(rowData);\r\n        }\r\n\r\n        const pushSubscriptionId = this.pushService.subscribe(\r\n          subQuery,\r\n          offset,\r\n          this,\r\n          async (err, eventObj, owner2) => {\r\n            // owner is playbackservice\r\n            const self = owner2 as PlaybackService;\r\n            const registration = self._playbackRegistry[conditionalSubscription.playbackSubscriptionId];\r\n\r\n            if (eventObj.aggregate === 'states') {\r\n              const thisScriptName = registration.scriptName;\r\n              const fromEvent = eventObj.payload._meta.fromEvent;\r\n              const eventName = fromEvent.payload.name;\r\n              const thisPlaybackScript = window[thisScriptName];\r\n              const playbackFunction = thisPlaybackScript.playbackInterface[eventName];\r\n\r\n              if (playbackFunction) {\r\n                const state = eventObj.payload;\r\n                const funcs = {\r\n                  emit: (targetQuery, payload, done) => {\r\n                    done();\r\n                  },\r\n                  getPlaybackList: (\r\n                    playbackListName: string,\r\n                    callback: (err, playbackList: PlaybackList) => void\r\n                  ) => {\r\n                    if (registration.playbackList) {\r\n                      callback(null, registration.playbackList);\r\n                    } else {\r\n                      callback(\r\n                        new Error(\r\n                          'PlaybackList does not exist in this registration'\r\n                        ),\r\n                        null\r\n                      );\r\n                    }\r\n                  },\r\n                };\r\n\r\n                const doneCallback = () => {\r\n                };\r\n                playbackFunction(state, fromEvent, funcs, doneCallback);\r\n              }\r\n            } else {\r\n\r\n              const thisScriptName = registration.scriptName;\r\n              const thisPlaybackScript = window[thisScriptName];\r\n              const playbackFunction = thisPlaybackScript.playbackInterface[eventObj.payload.name];\r\n\r\n              if (playbackFunction) {\r\n                // Override aggregateId to handle other subscriptions\r\n                if (registration.rowId) {\r\n                  eventObj.aggregateId = registration.rowId;\r\n                }\r\n                const row = conditionalSubscription.stateFunctions.getState(eventObj.aggregateId);\r\n                const state = row.data;\r\n                const funcs = {\r\n                  emit: (targetQuery, payload, done) => {\r\n                    done();\r\n                  },\r\n                  getPlaybackList: (\r\n                    playbackListName: string,\r\n                    callback: (err, playbackList: PlaybackList) => void\r\n                  ) => {\r\n                    if (registration.playbackList) {\r\n                      callback(null, registration.playbackList);\r\n                    } else {\r\n                      callback(\r\n                        new Error(\r\n                          'PlaybackList does not exist in this registration'\r\n                        ),\r\n                        null\r\n                      );\r\n                    }\r\n                  },\r\n                };\r\n\r\n                const doneCallback = () => {\r\n                  // stateFunctions.setState(row.rowId, row);\r\n                };\r\n\r\n                playbackFunction(state, eventObj, funcs, doneCallback);\r\n              }\r\n            }\r\n          }\r\n        );\r\n\r\n        // just use the subscriptionId to map the push subscription to the playback\r\n        this._playbackRegistry[conditionalSubscription.playbackSubscriptionId] = {\r\n          owner: conditionalSubscription.owner,\r\n          pushSubscriptionId: pushSubscriptionId,\r\n          playbackList: conditionalSubscription.playbackList,\r\n          scriptName: conditionalSubscription.scriptName,\r\n          rowId: rowId\r\n        };\r\n\r\n        conditionalSubscription.pushSubscriptionId = pushSubscriptionId;\r\n\r\n        // console.log('subscribed to playback: ', pushSubscriptionId, conditionalSubscription.query);\r\n        return pushSubscriptionId;\r\n      } else if (!conditionalSubscription.conditionFunction(rowData) && conditionalSubscription.pushSubscriptionId) {\r\n        this.pushService.unsubscribe([conditionalSubscription.pushSubscriptionId]).then(() => {\r\n          delete this._playbackRegistry[conditionalSubscription.playbackSubscriptionId];\r\n          conditionalSubscription.pushSubscriptionId = undefined;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n",
    "import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { Filter, Sort, PlaybackListResponse } from '../models';\r\n\r\n@Injectable()\r\nexport class PlaybackListService {\r\n  constructor(private http: HttpClient) {}\r\n\r\n  getPlaybackList(\r\n    playbackListBaseUrl: string,\r\n    playbackListName: string,\r\n    startIndex: number,\r\n    limit: number,\r\n    filters?: Filter[],\r\n    sort?: Sort[]\r\n  ): Observable<PlaybackListResponse> {\r\n    let url = `${playbackListBaseUrl}/playback-list/${playbackListName}?startIndex=${startIndex}&limit=${limit}`;\r\n\r\n    if (filters) {\r\n      url += `&filters=${encodeURIComponent(JSON.stringify(filters))}`;\r\n    }\r\n\r\n    if (sort) {\r\n      url += `&sort=${JSON.stringify(sort)}`;\r\n    }\r\n\r\n    return this.http.get<PlaybackListResponse>(url);\r\n  }\r\n\r\n  getPlaybackListCsv(\r\n    playbackListBaseUrl: string,\r\n    playbackListName: string,\r\n    startIndex: number,\r\n    limit: number,\r\n    filters?: Filter[],\r\n    sort?: Sort[],\r\n    type?: string\r\n  ): Observable<any> {\r\n    let url = `${playbackListBaseUrl}/playback-list/${playbackListName}/export?startIndex=${startIndex}&limit=${limit}`;\r\n\r\n    if (filters) {\r\n      url += `&filters=${JSON.stringify(filters)}`;\r\n    }\r\n\r\n    if (sort) {\r\n      url += `&sort=${JSON.stringify(sort)}`;\r\n    }\r\n\r\n    if (type) {\r\n      url += `&type=${type}`;\r\n    }\r\n    return this.http.get<PlaybackListResponse>(url, <any>{ responseType: 'text/csv'});\r\n  }\r\n}\r\n",
    "import { Helpers } from './utils/helpers';\r\nimport {\r\n  Component,\r\n  OnInit,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  OnDestroy,\r\n  Inject\r\n} from '@angular/core';\r\n\r\nimport { switchMap, debounceTime } from 'rxjs/operators';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport { Subject } from 'rxjs/Subject';\r\nimport { map as rxMap } from 'rxjs/operators/map';\r\nimport { JQ_TOKEN } from './services/jquery.service';\r\n\r\nimport {\r\n  SubscriptionConfiguration,\r\n  Script,\r\n  PlaybackList,\r\n  RowItem,\r\n  Filter,\r\n  Query,\r\n  Sort,\r\n  PlaybackListRequest,\r\n  CustomPlaybackConfiguration,\r\n  PlaybackListResponse\r\n} from './models';\r\n\r\n\r\nimport { ScriptService } from './services/script.service';\r\nimport { PlaybackService } from './services/playback.service';\r\nimport { PlaybackListService } from './services/playback-list.service';\r\n\r\nimport * as Immutable from 'immutable';\r\nimport _defaultsDeep from 'lodash-es/defaultsDeep';\r\nimport _isEmpty from 'lodash-es/isEmpty';\r\nimport _isEqual from 'lodash-es/isEqual';\r\nimport _cloneDeep from 'lodash-es/cloneDeep';\r\nimport _clone from 'lodash-es/clone';\r\nimport _uniq from 'lodash-es/uniq';\r\nimport _merge from 'lodash-es/defaults';\r\nimport * as moment_ from 'moment-mini-ts';\r\n\r\nimport saveAs from 'file-saver';\r\n\r\n@Component({\r\n  selector: 'lib-ng-eventstore-listing',\r\n  template: `<!-- <div *ngIf=\"listHeaderGroups && listHeaderGroups.groups && listHeaderGroups.groups.length > 0\"  [class]=\"'row ' + (listHeaderGroups && listHeaderGroups.generalRowClassName ? listHeaderGroups.generalRowClassName : '')\">\r\n  <div class=\"col-12\">\r\n    <div class=\"header bg-white p-2\">\r\n      <div [class]=\"'row ' + listHeaderGroups.generalRowClassName\">\r\n        <div *ngFor=\"let listHeaderGroup of listHeaderGroups.groups\" [class]=\"listHeaderGroup.className\">\r\n          <div [class]=\"'row ' + listHeaderGroups.generalRowClassName\">\r\n            <div *ngFor=\"let listHeader of listHeaderGroup.listHeaders\" [class]=\"listHeader.className\">\r\n              <span (click)=\"onSort(listHeader.sortProperty)\" [ngClass]=\"{ 'sort-header': listHeader.sortProperty }\">{{ listHeader.displayName }} <i *ngIf=\"sortFields[listHeader.sortProperty] && sortFields[listHeader.sortProperty].icon\" [class]=\"'sort-icon ' + sortFields[listHeader.sortProperty].icon\"></i></span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div> -->\r\n<!-- <div [class]=\"'row ' + (listHeaderGroups && listHeaderGroups.generalRowClassName) ? listHeaderGroups.generalRowClassName : ''\" *ngFor=\"let item of dataList; trackBy: trackByFn\"> -->\r\n<div class=\"row\" *ngFor=\"let item of _dataList; trackBy: trackByFn\">\r\n  <div class=\"col-12\">\r\n    <lib-item-template-holder\r\n      [data]=\"item\"\r\n      [itemComponentClass]=\"itemComponentClass\"\r\n      [lookups]=\"lookups\"\r\n      (updateEmitter)=\"_onUpdate($event)\"\r\n      (getLookupsEmitter)=\"_onGetLookups($event)\"\r\n      (showModalEmitter)=\"_onShowModal($event)\"\r\n      (deleteEmitter)=\"_onDelete($event)\">\r\n    </lib-item-template-holder>\r\n  </div>\r\n</div>\r\n<div class=\"row\" *ngIf=\"(!_dataCount || _dataCount === 0) && !_isLoading\">\r\n  <div class=\"col-12\">\r\n    <div class=\"row\">\r\n      <div class=\"col-12 no-results-container\">\r\n        <div class=\"text-center text-secondary\">\r\n          <span class=\"italic\">{{ emptyListDisplayText }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div [id]=\"'ng-eventstore-listing-overlay-' + _id\" class=\"ng-eventstore-listing-overlay\">\r\n  <div [id]=\"'ng-eventstore-listing-overlay-subject-' + _id\" class=\"ng-eventstore-listing-overlay-subject\" [ngStyle]=\"{ top:  loadingOffset }\">\r\n      <div class=\"ng-eventstore-listing-cssload-container\">\r\n        <div class=\"ng-eventstore-listing-cssload-speeding-wheel\"></div>\r\n      </div>\r\n  </div>\r\n</div>\r\n`,\r\n  styles: [`.ng-eventstore-listing-overlay{position:absolute;width:100%;height:100%;top:0;left:0;right:0;bottom:0;background-color:#efefef;opacity:.7;z-index:10;display:none}.ng-eventstore-listing-overlay-subject{position:absolute;left:50%;font-size:50px;color:transparent;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);text-align:center}.ng-eventstore-listing-cssload-container{width:100%;height:49px;text-align:center}.ng-eventstore-listing-cssload-speeding-wheel{width:49px;height:49px;margin:0 auto;border:3px solid #3b356e;border-radius:50%;border-left-color:transparent;border-right-color:transparent;animation:475ms linear infinite cssload-spin;-o-animation:475ms linear infinite cssload-spin;-ms-animation:cssload-spin 475ms infinite linear;-webkit-animation:475ms linear infinite cssload-spin;-moz-animation:475ms linear infinite cssload-spin}@keyframes cssload-spin{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes cssload-spin{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}`],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class NgEventstoreListingComponent\r\n  implements OnInit, OnChanges, OnDestroy {\r\n  @Output() updateEmitter: EventEmitter<any> = new EventEmitter();\r\n  @Output() getLookupsEmitter: EventEmitter<any> = new EventEmitter();\r\n  @Output() showModalEmitter: EventEmitter<any> = new EventEmitter();\r\n  @Output() deleteEmitter: EventEmitter<any> = new EventEmitter();\r\n  @Output() playbackListLoadedEmitter: EventEmitter<any> = new EventEmitter();\r\n  @Output() newItemNotifyEmitter: EventEmitter<any> = new EventEmitter();\r\n  @Output() removedItemNotifyEmitter: EventEmitter<any> = new EventEmitter();\r\n  @Output() getPlaybackLIstErrorEmitter: EventEmitter<any> = new EventEmitter();\r\n\r\n  @Input() itemComponentClass: any;\r\n  @Input() lookups = {};\r\n  @Input() socketUrl: string;\r\n  @Input() playbackListBaseUrl: string;\r\n  @Input() scriptStore: Script[];\r\n  @Input() itemSubscriptionConfigurations: SubscriptionConfiguration[] = [];\r\n  @Input() listSubscriptionConfiguration: SubscriptionConfiguration;\r\n  @Input() playbackListName: string;\r\n  @Input() filters: Filter[] = null;\r\n  @Input() sort: Sort[] = null;\r\n  @Input() pageIndex = 1;\r\n  @Input() itemsPerPage: number;\r\n  @Input() responseBasePath = 'data';\r\n  @Input() emptyListDisplayText = 'No Results';\r\n  @Input() csvFileName = '';\r\n  @Input() customPlaybackConfigurations: CustomPlaybackConfiguration[];\r\n  @Input() enableLoadingOverlay = true;\r\n  @Input() loadingTopBoundSelector: string;\r\n  @Input() minHeightCss = '500px';\r\n  @Input() loadingOffset = '200px';\r\n\r\n  @Input() debugging = false;\r\n\r\n  _dataList: Immutable.List<RowItem>;\r\n  _dataCount: number;\r\n  _dataTotalCount: number;\r\n  _initialized = false;\r\n  _isLoading = false;\r\n  _getPlaybackListSubscription: Subscription;\r\n  _getPlaybackListSubject: Subject<PlaybackListRequest> = new Subject();\r\n  _exportPlaybackListSubscription: Subscription;\r\n  _exportPlaybackListSubject: Subject<any> = new Subject();\r\n  _playbackSubscriptionTokens: string[] = [];\r\n  _playbackList: PlaybackList = {\r\n    get: (rowId: string, callback: (err, item) => void) => {\r\n      const rowIndex = this._dataList.findIndex((value: any) => {\r\n        return value.get('rowId') === rowId;\r\n      });\r\n\r\n      if (rowIndex > -1) {\r\n        const data = this._dataList.get(rowIndex);\r\n        if (data) {\r\n          callback(null, (data as any).toJS());\r\n        } else {\r\n          callback(null, {});\r\n        }\r\n      } else {\r\n        callback(new Error(`Row with rowId: ${rowIndex} does not exist`), null);\r\n      }\r\n    },\r\n    add: (\r\n      rowId: string,\r\n      revision: number,\r\n      data: any,\r\n      meta: any,\r\n      callback: (err?: any) => void\r\n    ) => {\r\n      // const newEntry = {\r\n      //   rowId: rowId,\r\n      //   revision: revision,\r\n      //   data: data,\r\n      //   meta: meta,\r\n      // };\r\n      // this.dataList = this.dataList.push(Immutable.fromJS(newEntry));\r\n      // this.changeDetectorRef.detectChanges();\r\n      // Do refresh trigger\r\n      const newItem = {\r\n        rowId,\r\n        revision,\r\n        data,\r\n        meta\r\n      };\r\n      this.newItemNotifyEmitter.emit(newItem);\r\n      callback();\r\n    },\r\n    update: (\r\n      rowId: string,\r\n      revision: number,\r\n      oldData: any,\r\n      newData: any,\r\n      meta: any,\r\n      callback: (err?) => void\r\n    ) => {\r\n      const rowIndex = this._dataList.findIndex((value: any) => {\r\n        return value.get('rowId') === rowId;\r\n      });\r\n\r\n      // oldData is Immutable\r\n      const newEntry = Immutable.fromJS({\r\n        rowId: rowId,\r\n        revision: revision,\r\n        data: {\r\n          ...oldData,\r\n          ...newData,\r\n        },\r\n        meta: meta,\r\n      });\r\n\r\n      if (this.debugging) {\r\n        console.log(newEntry);\r\n      }\r\n\r\n      if (rowIndex > -1) {\r\n        if (this.debugging) {\r\n          console.log(rowIndex);\r\n          console.log(newEntry);\r\n\r\n          console.log(this._dataList.toJS());\r\n        }\r\n        this._dataList = this._dataList.set(rowIndex, newEntry);\r\n\r\n        if (this.debugging) {\r\n          console.log(this._dataList.toJS());\r\n        }\r\n        this.changeDetectorRef.detectChanges();\r\n        callback();\r\n      } else {\r\n        callback(new Error(`Row with rowId: ${rowIndex} does not exist`));\r\n      }\r\n    },\r\n    delete: (rowId: string, callback: (error?: any) => void) => {\r\n      const rowIndex = this._dataList.findIndex((value: any) => {\r\n        return value.get('rowId') === rowId;\r\n      });\r\n\r\n      if (rowIndex > -1) {\r\n        // this._dataList = this._dataList.remove(rowIndex);\r\n        this.removedItemNotifyEmitter.emit(rowId);\r\n        callback(null);\r\n      } else {\r\n        callback(new Error(`Row with rowId: ${rowIndex} does not exist`));\r\n      }\r\n    },\r\n  };\r\n\r\n  _id: string = Helpers.generateToken();\r\n\r\n  _stateFunctions = {\r\n    getState: (id: string) => {\r\n      const index = this._dataList.findIndex((row: any) => {\r\n        return row.get('rowId') === id;\r\n      });\r\n      if (index > 0) {\r\n        return (this._dataList.get(index) as any).toJS();\r\n      }\r\n\r\n      return {};\r\n    },\r\n    setState: (id: string, data: any) => {\r\n      const index = this._dataList.findIndex((row: any) => {\r\n        return row.get('rowId') === id;\r\n      });\r\n      this._dataList = this._dataList.set(index, Immutable.fromJS(data));\r\n      this.changeDetectorRef.markForCheck();\r\n    },\r\n  };\r\n\r\n  constructor(\r\n    @Inject(JQ_TOKEN) public $: any,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n    private scriptService: ScriptService,\r\n    private playbackService: PlaybackService,\r\n    private playbackListService: PlaybackListService\r\n  ) {}\r\n\r\n  async ngOnInit() {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const self = this;\r\n\r\n    if (!self._initialized) {\r\n      this._initialized = true;\r\n      this._loadScripts().then(() => {\r\n        this._initializeRequests();\r\n        this.playbackService.init(this.socketUrl);\r\n        const changesKeys = Object.keys(changes);\r\n        changesKeys.forEach((key) => {\r\n          self[key] = changes[key].currentValue;\r\n          switch (key) {\r\n            case 'pageIndex':\r\n            case 'filters':\r\n            case 'sort': {\r\n              this.requestPlaybackList();\r\n              break;\r\n            }\r\n          }\r\n        });\r\n\r\n      });\r\n    } else {\r\n      const changesKeys = Object.keys(changes);\r\n      changesKeys.forEach((key) => {\r\n        self[key] = changes[key].currentValue;\r\n        switch (key) {\r\n          case 'pageIndex':\r\n          case 'filters':\r\n          case 'sort':\r\n          case 'playbackListName': {\r\n            this.requestPlaybackList();\r\n            break;\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  ngOnDestroy() {\r\n    this._resetSubscriptions();\r\n    this.playbackService.resetCustomPlaybacks();\r\n    this._initialized = false;\r\n  }\r\n\r\n  trackByFn(index: number, item: any) {\r\n    return item.get('rowId');\r\n  }\r\n\r\n  private _initializeRequests(): void {\r\n    const self = this;\r\n    self._getPlaybackListSubscription = self._getPlaybackListSubject\r\n      .pipe(\r\n        debounceTime(100),\r\n        switchMap((params) => {\r\n          return self.playbackListService.getPlaybackList(\r\n            self.playbackListBaseUrl,\r\n            params.playbackListName,\r\n            params.startIndex,\r\n            params.limit,\r\n            params.filters,\r\n            params.sort\r\n          );\r\n        })\r\n      )\r\n      .subscribe((res: any) => {\r\n        self._dataList = Immutable.fromJS(res.rows);\r\n        self._dataCount = res.rows.length;\r\n        self._dataTotalCount = res.count;\r\n\r\n        self._resetSubscriptions();\r\n        self._initSubscriptions();\r\n        self._initCustomPlaybackConfigurations();\r\n\r\n        self.changeDetectorRef.detectChanges();\r\n\r\n        self.playbackListLoadedEmitter.emit({\r\n          totalItems: self._dataTotalCount,\r\n          dataCount: self._dataCount,\r\n        });\r\n\r\n        if (self.enableLoadingOverlay) {\r\n          self.hideLoadingOverlay();\r\n        }\r\n        self._isLoading = false;\r\n      }, (error: any) => {\r\n        self.getPlaybackLIstErrorEmitter.emit(error);\r\n        if (self.enableLoadingOverlay) {\r\n          self.hideLoadingOverlay();\r\n        }\r\n        self._isLoading = false;\r\n      });\r\n\r\n    self._exportPlaybackListSubscription = self._exportPlaybackListSubject\r\n    .pipe(\r\n      debounceTime(100),\r\n      switchMap((params) => {\r\n        const playbackListRequest = params.playbackListRequest;\r\n        return self.playbackListService.getPlaybackListCsv(\r\n          self.playbackListBaseUrl,\r\n          playbackListRequest.playbackListName,\r\n          playbackListRequest.startIndex,\r\n          playbackListRequest.limit,\r\n          playbackListRequest.filters,\r\n          playbackListRequest.sort,\r\n          playbackListRequest.type\r\n        ).pipe(\r\n          rxMap((response: PlaybackListResponse) => {\r\n            return [response, params.fileNameOverride];\r\n          })\r\n        );\r\n      })\r\n    )\r\n    .subscribe(([result, fileNameOverride]) => {\r\n      const csv = new Blob([result], { type: 'text/csv' });\r\n      const moment = moment_;\r\n      const now = moment();\r\n      const fileName = `${fileNameOverride || this.csvFileName || this.playbackListName}-${now.format('YYYY-MM-DD_HHmmss')}.csv`;\r\n      saveAs(csv, fileName);\r\n    });\r\n  }\r\n\r\n  _getPlaybackList(\r\n    playbackListName: string,\r\n    startIndex: number,\r\n    limit: number,\r\n    filters?: Filter[],\r\n    sort?: Sort[]\r\n  ) {\r\n    const playbackListRequestParams: PlaybackListRequest = {\r\n      playbackListName: playbackListName,\r\n      startIndex: startIndex,\r\n      limit: limit,\r\n      filters: filters,\r\n      sort: sort,\r\n    };\r\n    this._isLoading = true;\r\n    if (this.enableLoadingOverlay) {\r\n      this.showLoadingOverlay();\r\n    }\r\n    this._getPlaybackListSubject.next(playbackListRequestParams);\r\n  }\r\n\r\n  requestPlaybackList() {\r\n    const startIndex = this.itemsPerPage * (this.pageIndex - 1);\r\n    this._getPlaybackList(\r\n      this.playbackListName,\r\n      startIndex,\r\n      this.itemsPerPage,\r\n      this.filters,\r\n      this.sort\r\n    );\r\n  }\r\n\r\n  private async _loadScripts() {\r\n    if (this.scriptStore) {\r\n      await this.scriptService.init(this.scriptStore);\r\n    }\r\n  }\r\n\r\n  private async _initSubscriptions() {\r\n    const self = this;\r\n    // Per row subscriptions\r\n    (self.itemSubscriptionConfigurations || []).forEach((itemSubscriptionConfiguration: SubscriptionConfiguration) => {\r\n      if (itemSubscriptionConfiguration) {\r\n        self._dataList.forEach(async (row: any) => {\r\n          const streamRevisionFunction = itemSubscriptionConfiguration.streamRevisionFunction ?\r\n            itemSubscriptionConfiguration.streamRevisionFunction : () => +row.get('revision') + 1;\r\n\r\n\r\n          const aggregateId = itemSubscriptionConfiguration.rowIdFunction ?\r\n              itemSubscriptionConfiguration.rowIdFunction(row.toJS()) : row.get('rowId');\r\n\r\n          const query: Query = _clone(itemSubscriptionConfiguration.query);\r\n          query.aggregateId = query.aggregateId.replace(\r\n            /{{rowId}}/g,\r\n            aggregateId\r\n          );\r\n\r\n          const playbackSubscriptionToken = await self.playbackService.registerForPlayback(\r\n            self,\r\n            itemSubscriptionConfiguration.playbackScriptName,\r\n            query,\r\n            self._stateFunctions,\r\n            self._playbackList,\r\n            streamRevisionFunction,\r\n            row.get('rowId'),\r\n            itemSubscriptionConfiguration.condition,\r\n            itemSubscriptionConfiguration.rowIdFunction\r\n          );\r\n          this._playbackSubscriptionTokens.push(playbackSubscriptionToken);\r\n        });\r\n      }\r\n    });\r\n\r\n    if (self.listSubscriptionConfiguration) {\r\n      // List subscription\r\n      this._playbackSubscriptionTokens.push(\r\n        await self.playbackService.registerForPlayback(\r\n          self,\r\n          self.listSubscriptionConfiguration.playbackScriptName,\r\n          self.listSubscriptionConfiguration.query,\r\n          self._stateFunctions,\r\n          self._playbackList,\r\n          () => 0\r\n        )\r\n      );\r\n    }\r\n  }\r\n\r\n  private _initCustomPlaybackConfigurations() {\r\n    if (!_isEmpty(this.customPlaybackConfigurations)) {\r\n      this.playbackService.registerCustomPlaybacks(this.customPlaybackConfigurations);\r\n    }\r\n  }\r\n\r\n  _resetSubscriptions() {\r\n    this.playbackService.unregisterForPlayback(this._playbackSubscriptionTokens);\r\n    this._playbackSubscriptionTokens = [];\r\n  }\r\n\r\n  _onUpdate(payload: any) {\r\n    this.updateEmitter.emit(payload);\r\n  }\r\n\r\n  _onGetLookups(payload: any) {\r\n    this.getLookupsEmitter.emit(payload);\r\n  }\r\n\r\n  _onShowModal(payload: any) {\r\n    this.showModalEmitter.emit(payload);\r\n  }\r\n\r\n  _onDelete(payload: any) {\r\n    this.deleteEmitter.emit(payload);\r\n  }\r\n\r\n  exportCSV(overrideParams?: PlaybackListRequest, fileNameOverride?: string) {\r\n    if (overrideParams) {\r\n      this._exportPlaybackListSubject.next({ playbackListRequest: overrideParams, fileNameOverride: fileNameOverride });\r\n    } else {\r\n      const startIndex = this.itemsPerPage * (this.pageIndex - 1);\r\n      const exportPlaybackListRequestParams: PlaybackListRequest = {\r\n        playbackListName: this.playbackListName,\r\n        startIndex: startIndex,\r\n        limit: 1000000,\r\n        filters: this.filters,\r\n        sort: this.sort\r\n      };\r\n\r\n      this._exportPlaybackListSubject.next({ playbackListRequest: exportPlaybackListRequestParams, fileNameOverride: fileNameOverride });\r\n    }\r\n  }\r\n\r\n  // Loading Overlay Functions\r\n  hideLoadingOverlay() {\r\n    const $ = this.$;\r\n    $('body').css('overflow', '');\r\n    $('body').removeClass('loading-body');\r\n    $(`#ng-eventstore-listing-overlay-${this._id}`).hide();\r\n  }\r\n\r\n  showLoadingOverlay() {\r\n    const $ = this.$;\r\n    $(`#ng-eventstore-listing-overlay-${this._id}`).show();\r\n    if (this.loadingTopBoundSelector ? true : false) {\r\n      this._fixLoadingOverlayPosition();\r\n    }\r\n  }\r\n\r\n  _fixLoadingOverlayPosition() {\r\n    const $ = this.$;\r\n    const windowY = window.pageYOffset;\r\n    const pageHeaderSectionHeight = 53;\r\n    const pageHeaderSectionBottomY = $(this.loadingTopBoundSelector).offset().top + pageHeaderSectionHeight;\r\n    $('body').css('overflow', 'hidden');\r\n    $('body').addClass('loading-body');\r\n    if (windowY < pageHeaderSectionBottomY) {\r\n      $(`#ng-eventstore-listing-overlay-${this._id}`).css('position', 'absolute');\r\n      $(`#ng-eventstore-listing-overlay-${this._id}`).css('height', `${window.innerHeight}px`);\r\n      $(`#ng-eventstore-listing-overlay-${this._id}`).css('width', '100%');\r\n      const pageHeaderHeight = pageHeaderSectionHeight;\r\n      $(`#ng-eventstore-listing-overlay-${this._id}`).css('margin-top', `${pageHeaderHeight}px`);\r\n    } else {\r\n      $(`#ng-eventstore-listing-overlay-${this._id}`).css('position', 'fixed');\r\n      $(`#ng-eventstore-listing-overlay-${this._id}`).css('height', '100%');\r\n      $(`#ng-eventstore-listing-overlay-${this._id}`).css('margin-top', '0px');\r\n    }\r\n  }\r\n}\r\n",
    "import { Directive, ViewContainerRef } from '@angular/core';\n\n@Directive({\n  selector: '[libTemplateDirective]'\n})\nexport class TemplateDirective {\n  constructor(public viewContainerRef: ViewContainerRef) { }\n}\n",
    "import {\r\n  Component,\r\n  OnInit,\r\n  Input,\r\n  ViewChild,\r\n  ComponentFactoryResolver,\r\n  Output,\r\n  EventEmitter,\r\n  OnChanges,\r\n  ComponentRef,\r\n  SimpleChanges,\r\n  ChangeDetectionStrategy,\r\n  AfterViewInit,\r\n} from '@angular/core';\r\nimport { ItemTemplateComponent } from '../template-components/index';\r\nimport { TemplateDirective } from '../../directives/template.directive';\r\n\r\n@Component({\r\n  selector: 'lib-item-template-holder',\r\n  template: `<div class=\"row no-gutters\">\n  <div class=\"col-12\">\n    <ng-template libTemplateDirective></ng-template>\n  </div>\n</div>\n`,\r\n  styles: [``],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class ItemTemplateHolderComponent\r\n  implements OnInit, OnChanges, AfterViewInit {\r\n  @Input() itemComponentClass: any;\r\n  @Input() data: any = {};\r\n  @Input() lookups: any = {};\r\n  @Output() updateEmitter: EventEmitter<any> = new EventEmitter();\r\n  @Output() getLookupsEmitter: EventEmitter<any> = new EventEmitter();\r\n  @Output() showModalEmitter: EventEmitter<any> = new EventEmitter();\r\n  @Output() deleteEmitter: EventEmitter<any> = new EventEmitter();\r\n\r\n  componentRef: ComponentRef<any>;\r\n  initialChanges: SimpleChanges;\r\n  @ViewChild(TemplateDirective) itemHost: TemplateDirective;\r\n\r\n  constructor(private componentFactoryResolver: ComponentFactoryResolver) {}\r\n\r\n  ngOnInit(): void {\r\n    // this.loadComponent();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.loadComponent();\r\n    if (this.initialChanges) {\r\n      this.ngOnChanges(this.initialChanges);\r\n      this.initialChanges = undefined;\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const self = this;\r\n    if (self.componentRef) {\r\n      const changesKeys = Object.keys(changes);\r\n      changesKeys.forEach((key) => {\r\n        (self.componentRef.instance as ItemTemplateComponent)[key] =\r\n          changes[key].currentValue;\r\n      });\r\n      (self.componentRef.instance as ItemTemplateComponent).ngOnChanges(\r\n        changes\r\n      );\r\n    } else {\r\n      this.initialChanges = changes;\r\n    }\r\n  }\r\n\r\n  loadComponent(): void {\r\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(\r\n      this.itemComponentClass\r\n    );\r\n    const viewContainerRef = this.itemHost.viewContainerRef;\r\n    viewContainerRef.clear();\r\n\r\n    this.componentRef = viewContainerRef.createComponent(componentFactory);\r\n    (this.componentRef.instance as ItemTemplateComponent).data = this.data;\r\n    (this.componentRef\r\n      .instance as ItemTemplateComponent).onUpdateEmitter = this.updateEmitter;\r\n    (this.componentRef\r\n      .instance as ItemTemplateComponent).onGetLookupsEmitter = this.getLookupsEmitter;\r\n    (this.componentRef\r\n      .instance as ItemTemplateComponent).onShowModalEmitter = this.showModalEmitter;\r\n    (this.componentRef\r\n      .instance as ItemTemplateComponent).onDeleteEmitter = this.deleteEmitter;\r\n    // (this.componentRef.instance as ItemTemplateComponent).idPropertyName = this.idPropertyName;\r\n    (this.componentRef\r\n      .instance as ItemTemplateComponent).lookups = this.lookups;\r\n    (this.componentRef.instance as ItemTemplateComponent).ngOnInit();\r\n  }\r\n}\r\n",
    "import { Injectable } from '@angular/core';\r\nimport * as io from 'socket.io-client';\r\n\r\n@Injectable()\r\nexport class SocketIoService {\r\n  // sockets = {};\r\n  constructor() { }\r\n  getSocketInstance(socketUrl) {\r\n    return io.connect(`${socketUrl}/events`);\r\n  //   if (!this.sockets[socketUrl]) {\r\n  //     this.sockets[socketUrl] = io.connect(`${socketUrl}/events`);\r\n  //   }\r\n  //   return this.sockets[socketUrl];\r\n  }\r\n}\r\n",
    "import { NgModule } from '@angular/core';\r\nimport { NgEventstoreListingComponent } from './ng-eventstore-listing.component';\r\nimport { ItemTemplateHolderComponent } from './components/item-template-holder/item-template-holder.component';\r\n\r\nimport { CommonModule } from '@angular/common';\r\nimport { TemplateDirective } from './directives/template.directive';\r\n// import { IO_TOKEN, SocketIoService } from './services/socket.io.service';\r\n\r\n// import * as io from 'socket.io-client';\r\nimport { ScriptService } from './services/script.service';\r\nimport { PlaybackService } from './services/playback.service';\r\nimport { PlaybackListService } from './services/playback-list.service';\r\nimport { PushService } from './services/push.service';\r\nimport { SocketIoService } from './services/socket.io.service';\r\nimport { jQueryFactory, JQ_TOKEN } from './services/jquery.service';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    NgEventstoreListingComponent,\r\n    ItemTemplateHolderComponent,\r\n    TemplateDirective,\r\n\r\n  ],\r\n  imports: [CommonModule],\r\n  exports: [\r\n    NgEventstoreListingComponent\r\n  ],\r\n  providers: [\r\n    ScriptService,\r\n    PlaybackService,\r\n    PlaybackListService,\r\n    PushService,\r\n    SocketIoService,\r\n    { provide: JQ_TOKEN, useFactory: jQueryFactory }\r\n    // ,\r\n    // { provide: IO_TOKEN, useValue: io }\r\n  ]\r\n})\r\nexport class NgEventstoreListingModule {}\r\n",
    "import {\r\n  EventEmitter,\r\n  OnInit,\r\n  OnChanges,\r\n  SimpleChanges,\r\n  ChangeDetectorRef,\r\n} from '@angular/core';\r\n\r\nimport {\r\n  FormGroup, Validators, FormControl\r\n} from '@angular/forms';\r\n\r\nexport abstract class ItemTemplateComponent implements OnInit, OnChanges {\r\n  // Event Emitters\r\n  onUpdateEmitter: EventEmitter<any> = new EventEmitter();\r\n  onGetLookupsEmitter: EventEmitter<any> = new EventEmitter();\r\n  onShowModalEmitter: EventEmitter<any> = new EventEmitter();\r\n  onDeleteEmitter: EventEmitter<any> = new EventEmitter();\r\n\r\n  idPropertyName: string;\r\n  data: any; // Immutable item\r\n  lookups: any;\r\n  private _formGroup: FormGroup = new FormGroup({});\r\n  private _formGroupKeys: string[] = [];\r\n\r\n  _changeFn: (changes) => void;\r\n\r\n  constructor(protected changeDetectorRef?: ChangeDetectorRef) {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (this._changeFn) {\r\n      this._changeFn(changes);\r\n    }\r\n\r\n    const dataChanges = changes.data ? changes.data.currentValue : null;\r\n    if (dataChanges && !changes.data.isFirstChange()) {\r\n      const dataObj = (dataChanges as any).toJS();\r\n\r\n      this._formGroupKeys.forEach((key) => {\r\n        const newValue = dataObj.data[key];\r\n        const oldValue = this._formGroup.get(key).value;\r\n\r\n        if (newValue !== oldValue) {\r\n          this._formGroup.get(key).setValue(newValue, { emit: false, onlySelf: true });\r\n        }\r\n      });\r\n\r\n    }\r\n\r\n\r\n    if (this.changeDetectorRef) {\r\n      this.changeDetectorRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  registerChangeFunction = (changeFn: (changes) => void) => {\r\n    this._changeFn = changeFn;\r\n  }\r\n\r\n  onUpdate = (propertyName: string, actionData: any) => {\r\n    const actionEventEmitterData = {\r\n      propertyName: propertyName,\r\n      id: this.data.get(this.idPropertyName),\r\n      data: actionData,\r\n    };\r\n    this.onUpdateEmitter.emit(actionEventEmitterData);\r\n  }\r\n\r\n  onGetLookups = (lookupName: string, callback: (payload: any) => void) => {\r\n    const actionEventEmitterData = {\r\n      lookupName: lookupName,\r\n      callback: callback\r\n    };\r\n    this.onGetLookupsEmitter.emit(actionEventEmitterData);\r\n  }\r\n\r\n  onShowModal = (modalName, data) => {\r\n    const actionEventEmitterData = {\r\n      modalName: modalName,\r\n      id: this.data.get(this.idPropertyName),\r\n      data: data,\r\n    };\r\n    this.onShowModalEmitter.emit(actionEventEmitterData);\r\n  }\r\n\r\n  onDelete = (actionData?: any) => {\r\n    const actionEventEmitterData = {\r\n      id: this.data.get(this.idPropertyName),\r\n      data: actionData,\r\n    };\r\n    this.onDeleteEmitter.emit(actionEventEmitterData);\r\n  }\r\n\r\n  // registerFormControl(propertyName: string)\r\n  registerFormGroup = (formGroup: FormGroup): void => {\r\n    this._formGroup = formGroup;\r\n  }\r\n\r\n  createFormControl(propertyName: string, initialValue: any, validators: Validators): FormControl {\r\n    const formControl = new FormControl(initialValue, validators);\r\n    this._formGroup.addControl(propertyName, formControl);\r\n    this._formGroupKeys.push(propertyName);\r\n    return formControl;\r\n  }\r\n\r\n}\r\n",
    "export enum FilterOperator {\r\n  range = 'range',\r\n  dateRange = 'dateRange',\r\n  is = 'is',\r\n  any = 'any',\r\n  contains = 'contains',\r\n  endsWith = 'endsWith',\r\n  startsWith = 'startsWith',\r\n  arrayContains = 'arrayContains',\r\n  exists = 'exists',\r\n  notExists = 'notExists'\r\n}\r\n",
    "export enum SortDirection {\n  ASC = 'ASC',\n  DESC = 'DESC',\n}\n",
    "export enum GroupBooleanOperator {\n  and = 'and',\n  or = 'or'\n}\n"
  ],
  "names": [
    "__awaiter",
    "thisArg",
    "_arguments",
    "P",
    "generator",
    "Promise",
    "resolve",
    "reject",
    "fulfilled",
    "value",
    "step",
    "next",
    "e",
    "rejected",
    "result",
    "done",
    "adopt",
    "then",
    "apply",
    "__generator",
    "body",
    "f",
    "y",
    "t",
    "g",
    "_",
    "label",
    "sent",
    "trys",
    "ops",
    "verb",
    "throw",
    "return",
    "Symbol",
    "iterator",
    "this",
    "n",
    "v",
    "op",
    "TypeError",
    "call",
    "pop",
    "length",
    "push",
    "Helpers",
    "Math",
    "random",
    "toString",
    "substr",
    "Date",
    "now",
    "JQ_TOKEN",
    "InjectionToken",
    "jQueryFactory",
    "jQuery",
    "ScriptService",
    "scripts",
    "prototype",
    "init",
    "scriptStore",
    "promises",
    "forEach",
    "script",
    "_this",
    "name",
    "loaded",
    "src",
    "meta",
    "load",
    "all",
    "_a",
    "_i",
    "arguments",
    "loadScript",
    "status",
    "document",
    "querySelectorAll",
    "script_1",
    "createElement",
    "type",
    "readyState",
    "onreadystatechange",
    "onload",
    "onerror",
    "error",
    "console",
    "log",
    "getElementsByTagName",
    "appendChild",
    "getScript",
    "scriptName",
    "Injectable",
    "PushService",
    "subscriptions",
    "socketUrl",
    "ioPush",
    "io.connect",
    "on",
    "eventObj",
    "_processEvent",
    "_forOwn",
    "sub",
    "subscriptionQuery",
    "Object",
    "assign",
    "query",
    "offset",
    "emit",
    "token",
    "self",
    "queryKey",
    "context",
    "aggregate",
    "aggregateId",
    "keys",
    "clientToken",
    "isNaN",
    "streamRevision",
    "cb",
    "undefined",
    "owner",
    "monitorTags",
    "tag",
    "_meta",
    "reason_1",
    "eventType",
    "stateType",
    "eventSource",
    "monitor",
    "callback",
    "subscribe",
    "pushToken",
    "subscriptionQuery_1",
    "subscriptionToken",
    "catchUpEvents",
    "event",
    "unsubscribe",
    "pushTokens",
    "socketTokens",
    "clientSubscription",
    "_clone",
    "PlaybackService",
    "pushService",
    "_playbackRegistry",
    "_conditionalSubscriptionRegistry",
    "_customPlaybackRegistry",
    "unregisterForPlayback",
    "playbackTokens",
    "map",
    "playbackToken",
    "pushSubscriptionId",
    "tslib_1.__awaiter",
    "rowId",
    "registerForPlayback",
    "stateFunctions",
    "playbackList",
    "streamRevisionFunction",
    "conditionFunction",
    "rowIdFunction",
    "item",
    "playbackSubscriptionId",
    "aggregateId_1",
    "get",
    "rowData",
    "isConditionTrue",
    "err",
    "owner2",
    "registration",
    "thisScriptName",
    "fromEvent_1",
    "payload",
    "fromEvent",
    "eventName",
    "thisPlaybackScript",
    "window",
    "playbackFunction",
    "playbackInterface",
    "state",
    "targetQuery",
    "getPlaybackList",
    "playbackListName",
    "Error",
    "_updateConditionalSubscriptions",
    "customPlaybackConfiguration",
    "row",
    "getState",
    "data",
    "Array",
    "isArray",
    "registerCustomPlaybacks",
    "customPlaybackConfigurations",
    "resetCustomPlaybacks",
    "conditionalSubscription",
    "subQuery",
    "PlaybackListService",
    "http",
    "playbackListBaseUrl",
    "startIndex",
    "limit",
    "filters",
    "sort",
    "url",
    "encodeURIComponent",
    "JSON",
    "stringify",
    "getPlaybackListCsv",
    "responseType",
    "HttpClient",
    "NgEventstoreListingComponent",
    "$",
    "changeDetectorRef",
    "scriptService",
    "playbackService",
    "playbackListService",
    "updateEmitter",
    "EventEmitter",
    "getLookupsEmitter",
    "showModalEmitter",
    "deleteEmitter",
    "playbackListLoadedEmitter",
    "newItemNotifyEmitter",
    "removedItemNotifyEmitter",
    "getPlaybackLIstErrorEmitter",
    "lookups",
    "itemSubscriptionConfigurations",
    "pageIndex",
    "responseBasePath",
    "emptyListDisplayText",
    "csvFileName",
    "enableLoadingOverlay",
    "minHeightCss",
    "loadingOffset",
    "debugging",
    "_initialized",
    "_isLoading",
    "_getPlaybackListSubject",
    "Subject",
    "_exportPlaybackListSubject",
    "_playbackSubscriptionTokens",
    "_playbackList",
    "rowIndex",
    "_dataList",
    "findIndex",
    "toJS",
    "add",
    "revision",
    "newItem",
    "update",
    "oldData",
    "newData",
    "newEntry",
    "Immutable.fromJS",
    "set",
    "detectChanges",
    "delete",
    "_id",
    "_stateFunctions",
    "id",
    "index",
    "setState",
    "markForCheck",
    "ngOnInit",
    "ngOnChanges",
    "changes",
    "key",
    "currentValue",
    "requestPlaybackList",
    "_loadScripts",
    "_initializeRequests",
    "ngOnDestroy",
    "_resetSubscriptions",
    "trackByFn",
    "_getPlaybackListSubscription",
    "pipe",
    "debounceTime",
    "switchMap",
    "params",
    "res",
    "rows",
    "_dataCount",
    "_dataTotalCount",
    "count",
    "_initSubscriptions",
    "_initCustomPlaybackConfigurations",
    "totalItems",
    "dataCount",
    "hideLoadingOverlay",
    "_exportPlaybackListSubscription",
    "playbackListRequest",
    "rxMap",
    "response",
    "fileNameOverride",
    "_b",
    "__read",
    "o",
    "m",
    "r",
    "i",
    "ar",
    "csv",
    "Blob",
    "moment_",
    "fileName",
    "format",
    "saveAs",
    "_getPlaybackList",
    "playbackListRequestParams",
    "showLoadingOverlay",
    "itemsPerPage",
    "itemSubscriptionConfiguration",
    "replace",
    "playbackScriptName",
    "condition",
    "playbackSubscriptionToken",
    "listSubscriptionConfiguration",
    "_c",
    "_isEmpty",
    "_onUpdate",
    "_onGetLookups",
    "_onShowModal",
    "_onDelete",
    "exportCSV",
    "overrideParams",
    "exportPlaybackListRequestParams",
    "css",
    "removeClass",
    "hide",
    "show",
    "loadingTopBoundSelector",
    "_fixLoadingOverlayPosition",
    "windowY",
    "pageYOffset",
    "pageHeaderSectionBottomY",
    "top",
    "addClass",
    "innerHeight",
    "pageHeaderHeight",
    "Component",
    "args",
    "selector",
    "template",
    "styles",
    "changeDetection",
    "ChangeDetectionStrategy",
    "OnPush",
    "decorators",
    "Inject",
    "ChangeDetectorRef",
    "Output",
    "itemComponentClass",
    "Input",
    "TemplateDirective",
    "viewContainerRef",
    "Directive",
    "ViewContainerRef",
    "ItemTemplateHolderComponent",
    "componentFactoryResolver",
    "ngAfterViewInit",
    "loadComponent",
    "initialChanges",
    "componentRef",
    "componentFactory",
    "resolveComponentFactory",
    "itemHost",
    "clear",
    "createComponent",
    "onUpdateEmitter",
    "onGetLookupsEmitter",
    "onShowModalEmitter",
    "onDeleteEmitter",
    "ComponentFactoryResolver",
    "ViewChild",
    "SocketIoService",
    "getSocketInstance",
    "ɵ0",
    "NgEventstoreListingModule",
    "NgModule",
    "declarations",
    "imports",
    "CommonModule",
    "exports",
    "providers",
    "provide",
    "useFactory",
    "ItemTemplateComponent",
    "_formGroup",
    "FormGroup",
    "_formGroupKeys",
    "registerChangeFunction",
    "changeFn",
    "_changeFn",
    "onUpdate",
    "propertyName",
    "actionData",
    "actionEventEmitterData",
    "idPropertyName",
    "onGetLookups",
    "lookupName",
    "onShowModal",
    "modalName",
    "onDelete",
    "registerFormGroup",
    "formGroup",
    "dataChanges",
    "isFirstChange",
    "dataObj_1",
    "newValue",
    "setValue",
    "onlySelf",
    "createFormControl",
    "initialValue",
    "validators",
    "formControl",
    "FormControl",
    "addControl",
    "range",
    "dateRange",
    "is",
    "any",
    "contains",
    "endsWith",
    "startsWith",
    "arrayContains",
    "exists",
    "notExists",
    "ASC",
    "DESC",
    "and",
    "or"
  ],
  "mappings": "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"
}
